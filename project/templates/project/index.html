{% extends extent_html %}

    
{% load i18n %}
{% load staticfiles %}
{% load project_tags %}
{% load endless %}

{% block head_title %}
        项目
{% endblock %}
{% block breadcrumb %}
        <li>项目</li>
{% endblock %}

{% block extra_breadcrumb %}
            <form class="navbar-form navbar-right search_defined">
                <div class="form-group">
                  <input placeholder="搜索" type="text" value="{{ query }}" name="query" value="" class="form-control search-query">
                 <a href="#"><i class="glyphicon glyphicon-search"></i></a>
                </div>
            </form>
{% endblock %}

{% block body %}
<div class="row">
            <div class="col-md-2 count_block">
                <div class="squares">
                    <span class="s_name">新增项目</span>
                    <span class="s_num">25</span>
                </div>
                <div class="squares">
                    <span class="s_name">全部项目</span>
                    <span class="s_num">25</span>
                </div>
                <a href="javascript:void(0);" class="chart_btn active">
                    年<span class="color_blue"></span>
                </a>
                <a href="javascript:void(0);" class="chart_btn">
                    月<span class="color_green"></span>
                </a>
                <a href="javascript:void(0);" class="chart_btn">
                    日<span class="color_red"></span>
                </a>
            </div>
            <div class="col-md-10">
                <div class="chart">
                    <div class="chart_title">2014年每月新增项目数</div>
                    <div id="container" style="min-width: 400px; height: 309px; margin: 0 auto"></div>
                </div>
            </div>
</div>
        <div class="fill_form">
            <fieldset>
                    {%if extent_html == "site_base.html" %}
                    <div class="well">
                        <h3 class="list_title">项目（Project）</h3>                        
                        <p class="list_lead">项目是SDN创新实验平台中用于组织和开展研究的载体，项目由若干实验和参与实验的研究人员组成。</p>                     
                    </div>   
                    {%else%}
                    <legend>
                        <div class="title_word_bg">
                                                          项目
                                       <div class="triangle"></div> 
                        </div>
                    </legend>
                    <div class="row countschart">
                        <div class="col-md-2 counts">
                            <div class="counts_block">
                                <p><img src="{% static "img/file-01.png" %}"  /></p>
                                <p class="counts_block_title">新增项目</p>
                                <p class="counts_block_nums">{{ new_projects_num }}</p>
                            </div>
                            <div class="counts_block">
                                <p><img src="{% static "img/file-02.png" %}"  /></p>
                                <p class="counts_block_title">全部项目</p>
                                <p class="counts_block_nums">{{ total_projects}}</p>
                            </div>                                                 
                        </div>
                        <div class="col-md-10">
                            <iframe scrolling="no" id="countiframe" width="100%" height="182" src="/slice/countiframe/?target=project&type=day&stype=0" frameborder="0"></iframe>
                            <div id="countbutton">
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="100%" height="30">
                            <g class="highcharts-legend" zIndex="7" transform="translate(325,0)">
                            <rect rx="5" ry="5" fill="white" x="0.5" y="0.5" width="168" height="24" stroke="#CCC" stroke-width="1" visibility="visible"></rect>
                            <g zIndex="1">
                            <g>
                            <g class="highcharts-legend-item" zIndex="1" transform="translate(8,3)">
                                <text x="30" y="15" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:12px;cursor:pointer;color:#274b6d;fill:#274b6d;" text-anchor="start" zIndex="2">
                                <tspan x="30" onclick="refreshcountiframe('project', 'year');"> 年</tspan>
                                </text>
                                <rect rx="2" ry="2" fill="#8bbc21" style="cursor:pointer" x="0" y="4" width="25" height="12" zIndex="3" onclick="refreshcountiframe('project', 'year');"></rect>
                            </g>
                            <g class="highcharts-legend-item" zIndex="1" transform="translate(64.28125,3)">
                                <text x="30" y="15" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:12px;cursor:pointer;color:#274b6d;fill:#274b6d;" text-anchor="start" zIndex="2">
                                <tspan x="30" onclick="refreshcountiframe('project', 'month');"> 月</tspan>
                                </text>
                                <rect rx="2" ry="2" fill="#0d233a" style="cursor:pointer" x="0" y="4" width="25" height="12" zIndex="3" onclick="refreshcountiframe('project', 'month');"></rect>
                            </g>
                            <g class="highcharts-legend-item" zIndex="1" transform="translate(120.5625,3)">
                                <text x="30" y="15" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:12px;cursor:pointer;color:#274b6d;fill:#274b6d;" text-anchor="start" zIndex="2">
                                <tspan x="30" onclick="refreshcountiframe('project', 'day');"> 日</tspan>
                                </text>
                                <rect rx="2" ry="2" fill="#2f7ed8" style="cursor:pointer" x="0" y="4" width="25" height="12" zIndex="3" onclick="refreshcountiframe('project', 'day');"></rect>
                            </g>
                            </g>
                            </g>
                            </g>
                            </svg>
                            </div>
                        </div>
                    </div>
                    {%endif%}
                {% if not projects %}
                    {% if query %}
                        <p class="alert alert-info">抱歉，没有找到任何相关的结果</p>
                    {% else %}
                        <p class="alert alert-info">暂无记录</p>
                    {% endif %}
                {% endif %}
                
                {%if projects %}
                 <div id="list_show" class="project_list">
                     {% include "project/list_page.html" %}
                 </div>
                 {%endif%}
            </fieldset>
        </div>
{% endblock %}
{% block extra_script %}
<script src="{{ STATIC_URL}}js/list_pagination.js"></script>
<script type="text/javascript">
    function refreshcountiframe(target, type){
        document.getElementById("countiframe").src="/slice/countiframe/?target="+target+"&type="+type+"&stype=0"; 
    }
</script>

{% endblock %}
