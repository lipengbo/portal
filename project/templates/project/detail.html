{% extends "site_base.html" %}
{% load i18n %}
{% load staticfiles %}
{% load project_tags %}

{% block head_title %}
{% trans "Project Detail" %} [{{ project.name }}]
{% endblock %}
{% block breadcrumb %}
<li class="active">{% trans "Project Detail" %}</li>
{% endblock %}

{% block body %}
<fieldset class="base_info">
    <legend><a href="{% url project_edit project.id %}" class="btn btn-info edit">{% trans "Edit" %}</a>{% trans "Basic info" %}</legend>
    <table class="table">
        <thead>
        </thead>
        <tbody>
            <tr>
                <td width="71">{% trans "Project Name" %}：</td>
                <td>
                    {{ project.name }}
                </td>
            </tr>
            <tr>
                <td width="71">{% trans "Project Description" %}：</td>
                <td>{{ project.description }}</td>
            </tr>
            <tr>
                <td width="71">
                    {% trans "Creator" %}：
                </td>
                <td>
                    {{ project.owner }}
                </td>
            </tr>
            <tr>
                <td width="71">
                    {% trans "Category" %}：
                </td>
                <td>
                    <span class="label label-success">{{ project.category }}</span>
                </td>
            </tr>
            <tr>
                <td width="71">
                    {% trans "Selected Islands" %}：
                </td>
                <td>
                    {% for island in project.islands.all %}
                        {{ island.name }}
                    {% endfor %}
                <td>
            </tr>
        </tbody>
    </table>
</fieldset>
<fieldset id="name">

    
    <legend>
        <a href="{% url project_applicant project.id  %}" class="btn btn-info edit">{% trans "View pending members" %}</a>
        <a href="{% url project_invite project.id %}" class="btn btn-info edit">{% trans "Invite members" %}</a>
   {% trans "Members" %}
    </legend>
<div class="row-fluid">
    <div class="span12">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>{% trans "No." %}</th>
                    <th>{% trans "Member name" %}</th>
                    <th>{% trans "Company/Organization" %}</th>
                    <th>{% trans "Actions" %}</th>
                </tr>
            </thead>
                {% for membership in project.membership_set.all %}
            <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ membership.user }}</td>
                    <td>{{ membership.user }}</td>
                    <td>
                        {% if not membership.is_owner %}
                        <a href="{% url project_delete_member membership.id  %}" class="btn btn-info btn-delete">{% trans "Remove" %}</a>
                        {% endif %}
                    </td>
            </tr>
                {% endfor %}
        </table>
    </div>
</div>
</fieldset>
  <div class="row-fluid sep_div">
    <div class="span12"><a href="{% url create_slice project.id %}" class="btn btn-large btn-block btn-info">创建Slice</a></div>
  </div>
  <fieldset>
      <legend>
          {% if  project.slice_set.count > 4%}
            <button type="button" class="btn btn-link edit" onclick="document.location='/slice/list/{{ project.id }}/'">更多>></button>
          {% endif %}
          Slice
      </legend>        
        <div class="row-fluid">
             <ul class="thumbnails example-sites">
		         {% for slice in project.slice_set.all %}
		         {% if forloop.counter <= 4  %}
		        <li class="span3 thumbnail">
		        	<a href="/slice/delete/{{ slice.id }}/2/" class="btn-delete close">×</a>
		          	<a class="" href="/slice/detail/{{ slice.id }}/" target="_blank">
		          	<img src="{% static slice.project.category.image %}" />
		            <table class="table">
		                <tbody>
		                    <tr>
		                        <td width="100">Slice名称：</td>
		                        <td>{{ slice.name }}</td>
		                    </tr>
		                    <tr>
		                        <td valign="top">创建者：</td>
		                        <td>{{ slice.owner }}</td>
		                    </tr>
		                    <tr>
		                        <td valign="top">状态：</td>
		                        <td>
		                        {%if slice.state == 0 %}
		                        停止
		                        {%else%}
		                        启动
		                        {%endif%}
		                        </td>
		                    </tr>
		                    <tr>
		                        <td valign="top">网络节点个数：</td>
		                        <td>{{ slice.get_switches.count }}个</td>
		                    </tr>
		                    <tr>
		                        <td valign="top">虚拟机个数：</td>
		                        <td>{{ slice.get_common_vms.count }}个</td>
		                    </tr>
		                </tbody>
		            </table>
		          </a>
		        </li>
		        {%endif%}
		         {% endfor %}
		     </ul>
		     </div>
  </fieldset>
{% endblock %}
{% block extra_script %}

<script type="text/javascript" charset="utf-8">
</script>
{% endblock %}
